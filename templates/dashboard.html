<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #f5f7fa;
            color: #2c3e50;
            padding: 0;
        }
        
        .navbar {
            background: white;
            padding: 20px 30px;
            border-bottom: 1px solid #e0e6ed;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .navbar h1 {
            color: #1a3a52;
            font-size: 26px;
            font-weight: 700;
            margin: 0;
        }
        
        .navbar p {
            color: #7f8c8d;
            font-size: 13px;
            margin: 5px 0 0 0;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 30px;
        }
        
        .tabs {
            display: flex;
            gap: 0;
            margin-bottom: 30px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 4px rgba(0,0,0,0.08);
        }
        
        .tab-btn {
            flex: 1;
            padding: 16px 20px;
            border: none;
            background: white;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
        }
        
        .tab-btn.active {
            color: #1a73e8;
            border-bottom-color: #1a73e8;
            background: #f8f9fa;
        }
        
        .tab-btn:hover:not(.active) {
            color: #34495e;
            background: #f8f9fa;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.3s;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .kpi-card {
            background: white;
            padding: 24px;
            border-radius: 8px;
            box-shadow: 0 1px 4px rgba(0,0,0,0.08);
            border-left: 4px solid #1a73e8;
        }
        
        .kpi-label {
            font-size: 12px;
            color: #7f8c8d;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .kpi-value {
            font-size: 32px;
            font-weight: 700;
            color: #1a3a52;
            margin-bottom: 8px;
        }
        
        .kpi-change {
            font-size: 13px;
            color: #27ae60;
            font-weight: 500;
        }
        
        .kpi-card.negative .kpi-change {
            color: #e74c3c;
        }
        
        .kpi-card.positive {
            border-left-color: #27ae60;
        }
        
        .kpi-card.warning {
            border-left-color: #f39c12;
        }
        
        .chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background: white;
            padding: 24px;
            border-radius: 8px;
            box-shadow: 0 1px 4px rgba(0,0,0,0.08);
        }
        
        .card-title {
            font-size: 16px;
            font-weight: 700;
            color: #1a3a52;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .card-title::before {
            content: '';
            width: 4px;
            height: 20px;
            background: #1a73e8;
            border-radius: 2px;
        }
        
        .table-container {
            overflow-x: auto;
            margin-bottom: 30px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 4px rgba(0,0,0,0.08);
        }
        
        th {
            background: #f8f9fa;
            color: #2c3e50;
            padding: 14px 16px;
            text-align: left;
            font-weight: 600;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 2px solid #e0e6ed;
        }
        
        td {
            padding: 14px 16px;
            border-bottom: 1px solid #e0e6ed;
            font-size: 14px;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        .ticker {
            font-weight: 700;
            color: #1a73e8;
        }
        
        .positive {
            color: #27ae60;
            font-weight: 600;
        }
        
        .negative {
            color: #e74c3c;
            font-weight: 600;
        }
        
        .action-buy {
            color: #27ae60;
            font-weight: 600;
        }
        
        .action-sell {
            color: #e74c3c;
            font-weight: 600;
        }
        
        @media (max-width: 768px) {
            .chart-grid {
                grid-template-columns: 1fr;
            }
            
            .kpi-grid {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 15px;
            }
            
            .navbar {
                padding: 15px 20px;
            }
            
            .navbar h1 {
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <script>
        const portfolioData = {{ data | safe }};
    </script>
    
    <div class="navbar">
        <h1>ðŸ“Š Portfolio Dashboard</h1>
        <p>Real-time Analytics â€¢ Risk Assessment â€¢ Performance Tracking</p>
    </div>
    
    <div class="container">
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('overview')">Overview</button>
            <button class="tab-btn" onclick="switchTab('risk')">Risk Analysis</button>
            <button class="tab-btn" onclick="switchTab('holdings')">Holdings</button>
            <button class="tab-btn" onclick="switchTab('transactions')">Transactions</button>
        </div>
        
        <!-- OVERVIEW TAB -->
        <div id="overview" class="tab-content active">
            <div class="kpi-grid">
                <div class="kpi-card positive">
                    <div class="kpi-label">Portfolio Value</div>
                    <div class="kpi-value" id="totalValueKPI">$0</div>
                    <div class="kpi-change">Current Market Value</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-label">Total Invested</div>
                    <div class="kpi-value" id="investedKPI">$0</div>
                    <div class="kpi-change">Cost Basis</div>
                </div>
                <div class="kpi-card positive">
                    <div class="kpi-label">Total Gain/Loss</div>
                    <div class="kpi-value" id="gainKPI">$0</div>
                    <div class="kpi-change" id="gainPctKPI">+0%</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-label">Sharpe Ratio</div>
                    <div class="kpi-value" id="sharpeKPI">0.00</div>
                    <div class="kpi-change">Risk-Adjusted Return</div>
                </div>
            </div>
            
            <div class="chart-grid">
                <div class="card">
                    <div class="card-title">Portfolio Allocation</div>
                    <canvas id="allocationChart"></canvas>
                </div>
                <div class="card">
                    <div class="card-title">Value Trend</div>
                    <canvas id="valueChart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- RISK TAB -->
        <div id="risk" class="tab-content">
            <div class="kpi-grid">
                <div class="kpi-card warning">
                    <div class="kpi-label">Annual Volatility</div>
                    <div class="kpi-value" id="volatilityKPI">0%</div>
                    <div class="kpi-change">Price Fluctuation</div>
                </div>
                <div class="kpi-card positive">
                    <div class="kpi-label">Sharpe Ratio</div>
                    <div class="kpi-value" id="sharpe2KPI">0.00</div>
                    <div class="kpi-change">Risk-Adjusted Score</div>
                </div>
                <div class="kpi-card warning">
                    <div class="kpi-label">Max Drawdown</div>
                    <div class="kpi-value" id="drawdownKPI">-0%</div>
                    <div class="kpi-change">Worst Loss from Peak</div>
                </div>
                <div class="kpi-card positive">
                    <div class="kpi-label">YTD Return</div>
                    <div class="kpi-value" id="returnKPI">+0%</div>
                    <div class="kpi-change">Year-to-Date Performance</div>
                </div>
            </div>
            
            <div class="chart-grid">
                <div class="card">
                    <div class="card-title">Volatility Trend</div>
                    <canvas id="volatilityChart"></canvas>
                </div>
                <div class="card">
                    <div class="card-title">Return Performance</div>
                    <canvas id="returnChart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- HOLDINGS TAB -->
        <div id="holdings" class="tab-content">
            <div class="table-container">
                <table id="holdingsTable">
                    <thead>
                        <tr>
                            <th>Ticker</th>
                            <th>Company</th>
                            <th>Shares</th>
                            <th>Avg Cost</th>
                            <th>Current Price</th>
                            <th>Current Value</th>
                            <th>Gain/Loss</th>
                            <th>Return %</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            
            <div class="chart-grid">
                <div class="card">
                    <div class="card-title">Performance by Stock</div>
                    <canvas id="holdingPerformanceChart"></canvas>
                </div>
                <div class="card">
                    <div class="card-title">Sector Allocation</div>
                    <canvas id="sectorChart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- TRANSACTIONS TAB -->
        <div id="transactions" class="tab-content">
            <div class="table-container">
                <table id="transactionsTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Ticker</th>
                            <th>Action</th>
                            <th>Shares</th>
                            <th>Price</th>
                            <th>Total Value</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            
            <div class="chart-grid">
                <div class="card">
                    <div class="card-title">Transaction Activity</div>
                    <canvas id="activityChart"></canvas>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }
        
        function initDashboard() {
            const data = portfolioData;
            
            // Update KPIs
            document.getElementById('totalValueKPI').textContent = '$' + data.total_value.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
            document.getElementById('investedKPI').textContent = '$' + data.total_invested.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
            document.getElementById('gainKPI').textContent = '$' + data.total_gain.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
            document.getElementById('gainPctKPI').textContent = '+' + data.total_return_pct.toFixed(2) + '%';
            document.getElementById('sharpeKPI').textContent = data.sharpe_ratio.toFixed(2);
            
            document.getElementById('volatilityKPI').textContent = (data.annual_volatility * 100).toFixed(1) + '%';
            document.getElementById('sharpe2KPI').textContent = data.sharpe_ratio.toFixed(2);
            document.getElementById('drawdownKPI').textContent = (data.max_drawdown * 100).toFixed(1) + '%';
            document.getElementById('returnKPI').textContent = '+' + data.total_return_pct.toFixed(2) + '%';
            
            // Populate holdings table
            const holdingsBody = document.querySelector('#holdingsTable tbody');
            data.holdings.forEach(h => {
                const row = holdingsBody.insertRow();
                const gainLossClass = h.gain_loss_pct >= 0 ? 'positive' : 'negative';
                const sign = h.gain_loss_pct >= 0 ? '+' : '';
                row.innerHTML = `
                    <td><span class="ticker">${h.ticker}</span></td>
                    <td>${h.company}</td>
                    <td>${h.shares}</td>
                    <td>$${h.purchase_price.toFixed(2)}</td>
                    <td>$${h.current_price.toFixed(2)}</td>
                    <td>$${h.current_value.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                    <td class="${gainLossClass}">$${h.gain_loss.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                    <td class="${gainLossClass}">${sign}${h.gain_loss_pct.toFixed(2)}%</td>
                `;
            });
            
            // Populate transactions table
            const transBody = document.querySelector('#transactionsTable tbody');
            data.transactions.forEach(t => {
                const row = transBody.insertRow();
                const actionClass = t.action === 'BUY' ? 'action-buy' : 'action-sell';
                row.innerHTML = `
                    <td>${t.date}</td>
                    <td><span class="ticker">${t.ticker}</span></td>
                    <td><span class="${actionClass}">${t.action}</span></td>
                    <td>${t.shares}</td>
                    <td>$${t.price.toFixed(2)}</td>
                    <td>$${t.total.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                `;
            });
            
            // Initialize charts
            initCharts(data);
        }
        
        function initCharts(data) {
            Chart.defaults.font.family = "-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto";
            Chart.defaults.color = '#7f8c8d';
            Chart.defaults.borderColor = '#e0e6ed';
            
            const colors = {
                primary: '#1a73e8',
                success: '#27ae60',
                danger: '#e74c3c',
                warning: '#f39c12',
                secondary: '#34495e'
            };
            
            const chartOptions = {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: { padding: 15, font: { size: 12, weight: '500' }, color: '#2c3e50' }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(44, 62, 80, 0.9)',
                        padding: 12,
                        titleFont: { size: 13, weight: '600' },
                        bodyFont: { size: 12 },
                        borderColor: '#1a73e8',
                        borderWidth: 1
                    }
                }
            };
            
            // Allocation Chart
            new Chart(document.getElementById('allocationChart'), {
                type: 'doughnut',
                data: {
                    labels: data.holdings.map(h => h.ticker),
                    datasets: [{
                        data: data.holdings.map(h => h.current_value),
                        backgroundColor: ['#1a73e8', '#34495e', '#7f8c8d'],
                        borderColor: 'white',
                        borderWidth: 2
                    }]
                },
                options: {...chartOptions, plugins: {...chartOptions.plugins, 
                    datalabels: { color: 'white', font: { weight: 'bold' } }
                }}
            });
            
            // Value Chart
            new Chart(document.getElementById('valueChart'), {
                type: 'line',
                data: {
                    labels: data.metrics_history.map(m => m.date),
                    datasets: [{
                        label: 'Portfolio Value',
                        data: data.metrics_history.map(m => m.value),
                        borderColor: colors.primary,
                        backgroundColor: 'rgba(26, 115, 232, 0.08)',
                        tension: 0.4,
                        fill: true,
                        borderWidth: 2,
                        pointRadius: 3,
                        pointHoverRadius: 5,
                        pointBackgroundColor: colors.primary
                    }]
                },
                options: {...chartOptions, scales: { y: { beginAtZero: false, ticks: { color: '#7f8c8d' } }, x: { ticks: { color: '#7f8c8d' } } }}
            });
            
            // Volatility Chart
            new Chart(document.getElementById('volatilityChart'), {
                type: 'line',
                data: {
                    labels: data.metrics_history.map(m => m.date),
                    datasets: [{
                        label: 'Volatility (%)',
                        data: data.metrics_history.map(m => (m.volatility * 100).toFixed(1)),
                        borderColor: colors.warning,
                        backgroundColor: 'rgba(243, 156, 18, 0.08)',
                        tension: 0.4,
                        fill: true,
                        borderWidth: 2,
                        pointRadius: 3,
                        pointHoverRadius: 5,
                        pointBackgroundColor: colors.warning
                    }]
                },
                options: {...chartOptions, scales: { y: { beginAtZero: false, ticks: { color: '#7f8c8d' } }, x: { ticks: { color: '#7f8c8d' } } }}
            });
            
            // Return Chart
            new Chart(document.getElementById('returnChart'), {
                type: 'line',
                data: {
                    labels: data.metrics_history.map(m => m.date),
                    datasets: [{
                        label: 'Return (%)',
                        data: data.metrics_history.map(m => m.return),
                        borderColor: colors.success,
                        backgroundColor: 'rgba(39, 174, 96, 0.08)',
                        tension: 0.4,
                        fill: true,
                        borderWidth: 2,
                        pointRadius: 3,
                        pointHoverRadius: 5,
                        pointBackgroundColor: colors.success
                    }]
                },
                options: {...chartOptions, scales: { y: { beginAtZero: true, ticks: { color: '#7f8c8d' } }, x: { ticks: { color: '#7f8c8d' } } }}
            });
            
            // Holding Performance
            new Chart(document.getElementById('holdingPerformanceChart'), {
                type: 'bar',
                data: {
                    labels: data.holdings.map(h => h.ticker),
                    datasets: [{
                        label: 'Return (%)',
                        data: data.holdings.map(h => h.gain_loss_pct),
                        backgroundColor: data.holdings.map(h => h.gain_loss_pct >= 0 ? colors.success : colors.danger),
                        borderRadius: 4,
                        borderSkipped: false
                    }]
                },
                options: {...chartOptions, scales: { y: { beginAtZero: true, ticks: { color: '#7f8c8d' } }, x: { ticks: { color: '#7f8c8d' } } }}
            });
            
            // Sector Chart
            new Chart(document.getElementById('sectorChart'), {
                type: 'pie',
                data: {
                    labels: data.holdings.map(h => h.sector),
                    datasets: [{
                        data: data.holdings.map(h => h.current_value),
                        backgroundColor: ['#1a73e8', '#34495e', '#7f8c8d'],
                        borderColor: 'white',
                        borderWidth: 2
                    }]
                },
                options: chartOptions
            });
            
            // Activity Chart
            const activityData = {};
            data.transactions.forEach(t => {
                const month = t.date.substring(0, 7);
                activityData[month] = (activityData[month] || 0) + 1;
            });
            
            new Chart(document.getElementById('activityChart'), {
                type: 'bar',
                data: {
                    labels: Object.keys(activityData).sort(),
                    datasets: [{
                        label: 'Transactions',
                        data: Object.values(activityData),
                        backgroundColor: colors.primary,
                        borderRadius: 4,
                        borderSkipped: false
                    }]
                },
                options: {...chartOptions, scales: { y: { beginAtZero: true, ticks: { color: '#7f8c8d' } }, x: { ticks: { color: '#7f8c8d' } } }}
            });
        }
        
        document.addEventListener('DOMContentLoaded', initDashboard);
    </script>
</body>
</html>
    
    <script>
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }
        
        function initDashboard() {
            const data = portfolioData;
            
            // Update KPIs
            document.getElementById('totalValueKPI').textContent = '$' + data.total_value.toLocaleString('en-US', {minimumFractionDigits: 2});
            document.getElementById('investedKPI').textContent = '$' + data.total_invested.toLocaleString('en-US', {minimumFractionDigits: 2});
            document.getElementById('gainKPI').textContent = '$' + data.total_gain.toLocaleString('en-US', {minimumFractionDigits: 2});
            document.getElementById('gainPctKPI').textContent = '+' + data.total_return_pct.toFixed(2) + '%';
            document.getElementById('sharpeKPI').textContent = data.sharpe_ratio.toFixed(2);
            
            document.getElementById('volatilityKPI').textContent = (data.annual_volatility * 100).toFixed(1) + '%';
            document.getElementById('sharpe2KPI').textContent = data.sharpe_ratio.toFixed(2);
            document.getElementById('drawdownKPI').textContent = (data.max_drawdown * 100).toFixed(1) + '%';
            document.getElementById('returnKPI').textContent = '+' + data.total_return_pct.toFixed(2) + '%';
            
            // Populate holdings table
            const holdingsBody = document.querySelector('#holdingsTable tbody');
            data.holdings.forEach(h => {
                const row = holdingsBody.insertRow();
                const gainLossClass = h.gain_loss_pct >= 0 ? 'positive' : 'negative';
                const sign = h.gain_loss_pct >= 0 ? '+' : '';
                row.innerHTML = `
                    <td><span class="ticker">${h.ticker}</span></td>
                    <td>${h.company}</td>
                    <td>${h.shares}</td>
                    <td>$${h.purchase_price.toFixed(2)}</td>
                    <td>$${h.current_price.toFixed(2)}</td>
                    <td>$${h.current_value.toLocaleString('en-US', {minimumFractionDigits: 2})}</td>
                    <td class="${gainLossClass}">$${h.gain_loss.toLocaleString('en-US', {minimumFractionDigits: 2})}</td>
                    <td class="${gainLossClass}">${sign}${h.gain_loss_pct.toFixed(2)}%</td>
                `;
            });
            
            // Populate transactions table
            const transBody = document.querySelector('#transactionsTable tbody');
            data.transactions.forEach(t => {
                const row = transBody.insertRow();
                row.innerHTML = `
                    <td>${t.date}</td>
                    <td><span class="ticker">${t.ticker}</span></td>
                    <td><strong>${t.action}</strong></td>
                    <td>${t.shares}</td>
                    <td>$${t.price.toFixed(2)}</td>
                    <td>$${t.total.toLocaleString('en-US', {minimumFractionDigits: 2})}</td>
                `;
            });
            
            // Charts
            initCharts(data);
        }
        
        function initCharts(data) {
            const chartOptions = {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: { padding: 15, font: { size: 12 } }
                    }
                }
            };
            
            // Portfolio Allocation
            new Chart(document.getElementById('allocationChart'), {
                type: 'doughnut',
                data: {
                    labels: data.holdings.map(h => h.ticker),
                    datasets: [{
                        data: data.holdings.map(h => h.current_value),
                        backgroundColor: ['#667eea', '#764ba2', '#f093fb']
                    }]
                },
                options: chartOptions
            });
            
            // Portfolio Value Over Time
            new Chart(document.getElementById('valueChart'), {
                type: 'line',
                data: {
                    labels: data.metrics_history.map(m => m.date),
                    datasets: [{
                        label: 'Portfolio Value',
                        data: data.metrics_history.map(m => m.value),
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {...chartOptions, scales: { y: { beginAtZero: false } }}
            });
            
            // Volatility Trend
            new Chart(document.getElementById('volatilityChart'), {
                type: 'line',
                data: {
                    labels: data.metrics_history.map(m => m.date),
                    datasets: [{
                        label: 'Volatility',
                        data: data.metrics_history.map(m => (m.volatility * 100).toFixed(1)),
                        borderColor: '#ee0979',
                        backgroundColor: 'rgba(238, 9, 121, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {...chartOptions, scales: { y: { beginAtZero: false } }}
            });
            
            // Return Trend
            new Chart(document.getElementById('returnChart'), {
                type: 'line',
                data: {
                    labels: data.metrics_history.map(m => m.date),
                    datasets: [{
                        label: 'Return %',
                        data: data.metrics_history.map(m => m.return),
                        borderColor: '#11998e',
                        backgroundColor: 'rgba(17, 153, 142, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {...chartOptions, scales: { y: { beginAtZero: true } }}
            });
            
            // Holding Performance
            new Chart(document.getElementById('holdingPerformanceChart'), {
                type: 'bar',
                data: {
                    labels: data.holdings.map(h => h.ticker),
                    datasets: [{
                        label: 'Return %',
                        data: data.holdings.map(h => h.gain_loss_pct),
                        backgroundColor: data.holdings.map(h => h.gain_loss_pct >= 0 ? '#11998e' : '#ee0979')
                    }]
                },
                options: chartOptions
            });
            
            // Sector Allocation
            new Chart(document.getElementById('sectorChart'), {
                type: 'pie',
                data: {
                    labels: data.holdings.map(h => h.sector),
                    datasets: [{
                        data: data.holdings.map(h => h.current_value),
                        backgroundColor: ['#667eea', '#764ba2', '#f093fb']
                    }]
                },
                options: chartOptions
            });
            
            // Trading Activity
            const activityData = {};
            data.transactions.forEach(t => {
                const month = t.date.substring(0, 7);
                activityData[month] = (activityData[month] || 0) + 1;
            });
            
            new Chart(document.getElementById('activityChart'), {
                type: 'bar',
                data: {
                    labels: Object.keys(activityData).sort(),
                    datasets: [{
                        label: 'Transactions',
                        data: Object.values(activityData),
                        backgroundColor: '#667eea'
                    }]
                },
                options: chartOptions
            });
        }
        
        // Initialize on load
        document.addEventListener('DOMContentLoaded', initDashboard);
    </script>
</body>
</html>
